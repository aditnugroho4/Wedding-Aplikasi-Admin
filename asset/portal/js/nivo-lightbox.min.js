!function(t,i,o,e){function n(i,o){this.el=i,this.$el=t(this.el),this.options=t.extend({},h,o),this._defaults=h,this._name=l,this.init()}var l="nivoLightbox",h={effect:"fade",theme:"default",keyboardNav:!0,onInit:function(){},beforeShowLightbox:function(){},afterShowLightbox:function(t){},beforeHideLightbox:function(){},afterHideLightbox:function(){},onPrev:function(t){},onNext:function(t){},errorMessage:"The requested content cannot be loaded. Please try again later."};n.prototype={init:function(){var i=this;this.$el.on("click",(function(t){t.preventDefault(),i.showLightbox()})),this.options.keyboardNav&&t("body").off("keyup").on("keyup",(function(o){var e=o.keyCode?o.keyCode:o.which;27==e&&i.destructLightbox(),37==e&&t(".nivo-lightbox-prev").trigger("click"),39==e&&t(".nivo-lightbox-next").trigger("click")})),this.options.onInit.call(this)},showLightbox:function(){var i=this;this.options.beforeShowLightbox.call(this);var o=this.constructLightbox();if(o){var e=o.find(".nivo-lightbox-content");if(e){var n=this.$el;if(t("body").addClass("nivo-lightbox-body-effect-"+this.options.effect),this.processContent(e,n),this.$el.attr("data-lightbox-gallery")){i=this;var l=t('[data-lightbox-gallery="'+this.$el.attr("data-lightbox-gallery")+'"]');t(".nivo-lightbox-nav").show(),t(".nivo-lightbox-prev").off("click").on("click",(function(o){o.preventDefault();var h=l.index(n);n=l.eq(h-1),t(n).length||(n=l.last()),i.processContent(e,n),i.options.onPrev.call(this,[n])})),t(".nivo-lightbox-next").off("click").on("click",(function(o){o.preventDefault();var h=l.index(n);n=l.eq(h+1),t(n).length||(n=l.first()),i.processContent(e,n),i.options.onNext.call(this,[n])}))}setTimeout((function(){o.addClass("nivo-lightbox-open"),i.options.afterShowLightbox.call(this,[o])}),1)}}},processContent:function(o,e){var n=this,l=e.attr("href");if(o.html("").addClass("nivo-lightbox-loading"),this.isHidpi()&&e.attr("data-lightbox-hidpi")&&(l=e.attr("data-lightbox-hidpi")),null!=l.match(/\.(jpeg|jpg|gif|png)$/)){var h=t("<img>",{src:l});h.one("load",(function(){var e=t('<div class="nivo-lightbox-image" />');e.append(h),o.html(e).removeClass("nivo-lightbox-loading"),e.css({"line-height":t(".nivo-lightbox-content").height()+"px",height:t(".nivo-lightbox-content").height()+"px"}),t(i).resize((function(){e.css({"line-height":t(".nivo-lightbox-content").height()+"px",height:t(".nivo-lightbox-content").height()+"px"})}))})).each((function(){this.complete&&t(this).load()})),h.error((function(){var i=t('<div class="nivo-lightbox-error"><p>'+n.options.errorMessage+"</p></div>");o.html(i).removeClass("nivo-lightbox-loading")}))}else if(video=l.match(/(youtube|youtu|vimeo)\.(com|be)\/(watch\?v=(\w+)|(\w+))/)){var a="",s="nivo-lightbox-video";if("youtube"==video[1]&&(a="http://www.youtube.com/v/"+video[4],s="nivo-lightbox-youtube"),"youtu"==video[1]&&(a="http://www.youtube.com/v/"+video[3],s="nivo-lightbox-youtube"),"vimeo"==video[1]&&(a="http://player.vimeo.com/video/"+video[3],s="nivo-lightbox-vimeo"),a){var r=t("<iframe>",{src:a,class:s,frameborder:0,vspace:0,hspace:0,scrolling:"auto"});o.html(r),r.load((function(){o.removeClass("nivo-lightbox-loading")}))}}else if("ajax"==e.attr("data-lightbox-type"))n=this,t.ajax({url:l,cache:!1,success:function(e){var n=t('<div class="nivo-lightbox-ajax" />');n.append(e),o.html(n).removeClass("nivo-lightbox-loading"),n.outerHeight()<o.height()&&n.css({position:"relative",top:"50%","margin-top":-n.outerHeight()/2+"px"}),t(i).resize((function(){n.outerHeight()<o.height()&&n.css({position:"relative",top:"50%","margin-top":-n.outerHeight()/2+"px"})}))},error:function(){var i=t('<div class="nivo-lightbox-error"><p>'+n.options.errorMessage+"</p></div>");o.html(i).removeClass("nivo-lightbox-loading")}});else if("#"==l.substring(0,1))if(t(l).length)(v=t('<div class="nivo-lightbox-inline" />')).append(t(l).clone().show()),o.html(v).removeClass("nivo-lightbox-loading"),v.outerHeight()<o.height()&&v.css({position:"relative",top:"50%","margin-top":-v.outerHeight()/2+"px"}),t(i).resize((function(){v.outerHeight()<o.height()&&v.css({position:"relative",top:"50%","margin-top":-v.outerHeight()/2+"px"})}));else{var v=t('<div class="nivo-lightbox-error"><p>'+n.options.errorMessage+"</p></div>");o.html(v).removeClass("nivo-lightbox-loading")}else r=t("<iframe>",{src:l,class:"nivo-lightbox-item",frameborder:0,vspace:0,hspace:0,scrolling:"auto"}),o.html(r),r.load((function(){o.removeClass("nivo-lightbox-loading")}));if(e.attr("title")){var c=t("<span>",{class:"nivo-lightbox-title"});c.text(e.attr("title")),t(".nivo-lightbox-title-wrap").html(c)}else t(".nivo-lightbox-title-wrap").html("")},constructLightbox:function(){if(t(".nivo-lightbox-overlay").length)return t(".nivo-lightbox-overlay");var i=t("<div>",{class:"nivo-lightbox-overlay nivo-lightbox-theme-"+this.options.theme+" nivo-lightbox-effect-"+this.options.effect}),o=t("<div>",{class:"nivo-lightbox-wrap"}),e=t("<div>",{class:"nivo-lightbox-content"}),n=t('<a href="#" class="nivo-lightbox-nav nivo-lightbox-prev">Previous</a><a href="#" class="nivo-lightbox-nav nivo-lightbox-next">Next</a>'),l=t('<a href="#" class="nivo-lightbox-close" title="Close">Close</a>'),h=t("<div>",{class:"nivo-lightbox-title-wrap"});o.append(e),o.append(h),i.append(o),i.append(n),i.append(l),t("body").append(i);var a=this;return i.on("click",(function(i){(i.target===this||t(i.target).hasClass("nivo-lightbox-content")||t(i.target).hasClass("nivo-lightbox-image"))&&a.destructLightbox()})),l.on("click",(function(t){t.preventDefault(),a.destructLightbox()})),i},destructLightbox:function(){this.options.beforeHideLightbox.call(this),t(".nivo-lightbox-overlay").removeClass("nivo-lightbox-open"),t(".nivo-lightbox-nav").hide(),t("body").removeClass("nivo-lightbox-body-effect-"+this.options.effect),t(".nivo-lightbox-prev").off("click"),t(".nivo-lightbox-next").off("click"),this.options.afterHideLightbox.call(this)},isHidpi:function(){return i.devicePixelRatio>1||!(!i.matchMedia||!i.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),\t\t\t\t\t\t\t  (min--moz-device-pixel-ratio: 1.5),\t\t\t\t\t\t\t  (-o-min-device-pixel-ratio: 3/2),\t\t\t\t\t\t\t  (min-resolution: 1.5dppx)").matches)}},t.fn[l]=function(i){return this.each((function(){t.data(this,l)||t.data(this,l,new n(this,i))}))}}(jQuery,window,document);